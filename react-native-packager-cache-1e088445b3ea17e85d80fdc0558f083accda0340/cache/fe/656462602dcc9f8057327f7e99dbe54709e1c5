var fs = require('fs');

module.exports = function applyPatch(file, patch) {
  var flip = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;


  fs.writeFileSync(file, fs.readFileSync(file, 'utf8').replace(patch.pattern, function (match) {
    return flip ? '' + patch.patch + match : '' + match + patch.patch;
  }));
};