var getGroup = require('./getGroup');

var hasGroup = function hasGroup(pbxGroup, name) {
  return pbxGroup.children.find(function (group) {
    return group.comment === name;
  });
};

module.exports = function createGroup(project, path) {
  return path.split('/').reduce(function (group, name) {
    if (!hasGroup(group, name)) {
      var uuid = project.pbxCreateGroup(name, '""');

      group.children.push({
        value: uuid,
        comment: name
      });
    }

    return project.pbxGroupByName(name);
  }, getGroup(project));
};