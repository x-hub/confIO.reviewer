var PbxFile = require('xcode/lib/pbxFile');
var removeFromPbxItemContainerProxySection = require('./removeFromPbxItemContainerProxySection');
var removeFromProjectReferences = require('./removeFromProjectReferences');
var removeProductGroup = require('./removeProductGroup');

module.exports = function removeProjectFromProject(project, filePath) {
  var file = project.removeFromPbxFileReferenceSection(new PbxFile(filePath));
  var projectRef = removeFromProjectReferences(project, file);

  if (projectRef) {
    removeProductGroup(project, projectRef.ProductGroup);
  }

  removeFromPbxItemContainerProxySection(project, file);

  return file;
};